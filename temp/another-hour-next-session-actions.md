# Another Hour ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - æ¬¡ã‚»ãƒƒã‚·ãƒ§ãƒ³ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

**ä½œæˆæ—¥**: 2025å¹´6æœˆ21æ—¥
**ã‚»ãƒƒã‚·ãƒ§ãƒ³**: packages/core æ”¹ä¿®ã¨time-design-coreçµ±åˆæˆ¦ç•¥ã‚»ãƒƒã‚·ãƒ§ãƒ³
**é€²æ—**: Time Design Modesçµ±åˆå®Œäº†ã€packages/coreä¾å­˜é–¢ä¿‚ä¿®æ­£å®Œäº†

---

## ğŸ¯ å„ªå…ˆåº¦é †ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

### ğŸ”´ **Priority 1: packages/core ãƒ†ã‚¹ãƒˆç’°å¢ƒä¿®å¾©** (æ¨å®š: 1-2æ—¥)

#### ç¾çŠ¶ã®å•é¡Œ
- Jestãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ15-30ç§’ï¼‰
- ESMã¨ts-jestã®è¨­å®šç«¶åˆ
- TypeScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºã‚¨ãƒ©ãƒ¼

#### å…·ä½“çš„ä¿®æ­£å†…å®¹
```bash
# 1. Jestè¨­å®šã®æ ¹æœ¬çš„è¦‹ç›´ã—
cd packages/core
# ç¾åœ¨ã®jest.config.jsã‚’ESMå¯¾å¿œã§å®Œå…¨æ›¸ãç›´ã—

# 2. TypeScriptè¨­å®šã®æœ€é©åŒ–
# tsconfig.jsonã®moduleResolutionè¨­å®šç¢ºèª

# 3. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£å®Œäº†
# - WakeBasedMode.test.ts (getterãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ æ¸ˆã¿)
# - TimeDesignManager.test.ts (configã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¿®æ­£æ¸ˆã¿)
# - validation.test.ts (å‹å®šç¾©ä¿®æ­£æ¸ˆã¿)
```

#### æˆåŠŸåŸºæº–
- [ ] å…¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒ15ç§’ä»¥å†…ã§å®Ÿè¡Œå®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ30%ä»¥ä¸Šã§è¡¨ç¤º
- [ ] TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚¼ãƒ­

### ğŸŸ¡ **Priority 2: time-design-coreçµ±åˆæˆ¦ç•¥å®Ÿè¡Œ** (æ¨å®š: 3-5æ—¥)

#### Phase 1: é‡è¤‡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‰Šé™¤
```bash
# 1. scheduler-webä¾å­˜é–¢ä¿‚å‰Šé™¤
cd packages/scheduler-web
npm uninstall @another-hour/time-design-core

# 2. package.jsonç·¨é›†
# - "@another-hour/time-design-core"è¡Œã‚’å‰Šé™¤

# 3. é‡è¤‡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤
rm -rf packages/@another-hour/time-design-core

# 4. å‹•ä½œç¢ºèª
npm run dev  # scheduler-webæ­£å¸¸å‹•ä½œç¢ºèª
```

#### Phase 2: packages/coreæœ€é©åŒ–
```bash
# 1. console.logå‰Šé™¤
# src/TimeDesignManager.ts - 6ç®‡æ‰€ã®console.logå‰Šé™¤

# 2. READMEã¨APIæ–‡æ›¸æ›´æ–°
# packages/core/README.md - å®Ÿè£…ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´åˆæ€§ç¢ºèª

# 3. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š
# ç›®æ¨™: 32% â†’ 60%ä»¥ä¸Š
```

#### æˆåŠŸåŸºæº–
- [ ] é‡è¤‡ã‚³ãƒ¼ãƒ‰1,797è¡Œå®Œå…¨å‰Šé™¤
- [ ] packages/coreã®ã¿ã§Time Design Modesæä¾›
- [ ] å…¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ­£å¸¸å‹•ä½œ
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®æœ€é©åŒ–ç¢ºèª

### ğŸŸ¢ **Priority 3: å“è³ªå‘ä¸Šã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™** (æ¨å®š: 1é€±é–“)

#### ã‚³ãƒ¼ãƒ‰å“è³ªæ”¹å–„
```bash
# 1. TypeScript strict modeæœ‰åŠ¹åŒ–
# tsconfig.jsonè¨­å®šå¼·åŒ–

# 2. ESLintå°å…¥
npm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin

# 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
# BaseMode.tsã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„
```

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
```bash
# 1. APIæ–‡æ›¸ç”Ÿæˆ
# TypeDocã¾ãŸã¯JSDocã§APIæ–‡æ›¸è‡ªå‹•ç”Ÿæˆ

# 2. ä½¿ç”¨æ–¹æ³•ã‚¬ã‚¤ãƒ‰æ›´æ–°
# packages/core/README.mdå®Œå…¨æ›´æ–°

# 3. CLAUDE.mdæ›´æ–°
# çµ±åˆå®Œäº†çŠ¶æ³ã‚’åæ˜ 
```

---

## ğŸ“ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
```
packages/core/
â”œâ”€â”€ jest.config.js          # ğŸ”´ Jestè¨­å®šã®æ ¹æœ¬è¦‹ç›´ã—
â”œâ”€â”€ src/TimeDesignManager.ts # ğŸŸ¡ console.logå‰Šé™¤
â”œâ”€â”€ src/validation.ts       # ğŸ”´ ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°exportç¢ºèª
â”œâ”€â”€ tests/validation.test.ts # ğŸ”´ å‹å®šç¾©ä¿®æ­£å®Œäº†
â”œâ”€â”€ tests/TimeDesignManager.test.ts # ğŸ”´ configã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¿®æ­£å®Œäº†
â””â”€â”€ tests/WakeBasedMode.test.ts # ğŸ”´ getterãƒ¡ã‚½ãƒƒãƒ‰å¯¾å¿œå®Œäº†
```

### å‰Šé™¤å¯¾è±¡
```
packages/@another-hour/time-design-core/  # ğŸŸ¡ å®Œå…¨å‰Šé™¤äºˆå®š
packages/scheduler-web/package.json      # ğŸŸ¡ ä¾å­˜é–¢ä¿‚å‰Šé™¤
```

### æ›´æ–°å¯¾è±¡
```
CLAUDE.md                    # ğŸŸ¢ çµ±åˆå®Œäº†çŠ¶æ³åæ˜ 
packages/core/README.md      # ğŸŸ¢ APIæ–‡æ›¸æ›´æ–°
```

---

## ğŸš€ æ¬¡ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ç’°å¢ƒç¢ºèª
- [ ] é–‹ç™ºã‚µãƒ¼ãƒãƒ¼æ­£å¸¸èµ·å‹•ç¢ºèª (`npm run dev`)
- [ ] packages/coreãƒ“ãƒ«ãƒ‰ç¢ºèª (`npm run build --workspace=@another-hour/core`)
- [ ] time-design-coreãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å­˜åœ¨ç¢ºèª

### ä½œæ¥­é–‹å§‹å‰ã®çŠ¶æ³æŠŠæ¡
```bash
# 1. ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆçŠ¶æ³ç¢ºèª
npm run test --workspace=@another-hour/core

# 2. ä¾å­˜é–¢ä¿‚ç¢ºèª
cat packages/scheduler-web/package.json | grep time-design-core

# 3. é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -la packages/@another-hour/
```

### æ¨å¥¨ä½œæ¥­é †åº
1. **Jestè¨­å®šä¿®æ­£** â†’ ãƒ†ã‚¹ãƒˆç’°å¢ƒå¾©æ—§
2. **é‡è¤‡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‰Šé™¤** â†’ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£çµ±åˆ
3. **å“è³ªå‘ä¸Š** â†’ é•·æœŸä¿å®ˆæ€§ç¢ºç«‹

---

## ğŸ“Š é€²æ—çŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿é …ç›®
- Time Design Modes ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£çµ±åˆå®Œäº†
- packages/coreä¾å­˜é–¢ä¿‚ä¿®æ­£å®Œäº†
- TypeScriptãƒ“ãƒ«ãƒ‰ç’°å¢ƒä¿®å¾©å®Œäº†
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ä¿®æ­£å®Œäº†
- WakeBasedMode.tsã®getterãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- TimeDesignManager.testã®å‹å®šç¾©ä¿®æ­£

### ğŸ”„ é€²è¡Œä¸­é …ç›®  
- Jestå®Ÿè¡Œç’°å¢ƒã®æœ€é©åŒ–
- ESMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºã®æ”¹å–„

### â³ æœªç€æ‰‹é …ç›®
- time-design-coreãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‰Šé™¤
- console.logæ–‡ã®å‰Šé™¤
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š

---

## ğŸ’¡ æŠ€è¡“çš„ãƒ¡ãƒ¢

### Jestè¨­å®šã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```javascript
// æ¨å¥¨è¨­å®šæ–¹å‘æ€§
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  moduleNameMapper: {
    '^(\\.{1,2}/.*)\\.js$': '$1'
  },
  transform: {
    '^.+\\.ts$': 'ts-jest'
  }
};
```

### çµ±åˆæˆ¦ç•¥ã®æ ¸å¿ƒ
- **packages/core**: TypeScript + ãƒ†ã‚¹ãƒˆ â†’ ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–
- **time-design-core**: JavaScript â†’ æ®µéšçš„å»ƒæ­¢
- **åˆ©ç›Š**: 1,797è¡Œå‰Šé™¤ + 74KB(moment.js)å‰Šé™¤ + ä¿å®ˆæ€§å‘ä¸Š

---

## ğŸ“ æ¬¡ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã®ç¢ºèªäº‹é …

ã€Œå‰å›ã¯ packages/core ã®ãƒ†ã‚¹ãƒˆä¿®æ­£ã¨ time-design-core ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸çµ±åˆæˆ¦ç•¥ã‚’æ¤œè¨ã—ã¾ã—ãŸã€‚Jestè¨­å®šã®å•é¡Œã§ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹çŠ¶æ³ã§ã€packages/core ã‚’ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ time-design-core ã‚’æ®µéšçš„ã«å»ƒæ­¢ã™ã‚‹æ–¹é‡ã‚’æ±ºå®šã—ã¾ã—ãŸã€‚Jestè¨­å®šã®æ ¹æœ¬ä¿®æ­£ã‹ã‚‰é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿã€

**æœ€é‡è¦**: packages/core ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒä¿®å¾©ãŒå…¨ä½“ã®æˆåŠŸã®éµã¨ãªã‚Šã¾ã™ã€‚

---

**ä½œæˆè€…**: Claude Code  
**æ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¨å¥¨é–‹å§‹**: Jestè¨­å®šä¿®æ­£ã‹ã‚‰